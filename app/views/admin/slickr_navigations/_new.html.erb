<% tree = [] %>
<% Slickr::Navigation.walk_tree do |navigation, level| %>
  <% tree << Array(
      {"#{Array.new(level, '-').join('')}#{navigation.title}".to_sym => page.id}
    ).flatten if page.type == nil %>
<% end %>

<%= semantic_form_for [:admin, @slickr_navigation],
                      builder: ActiveAdmin::FormBuilder do |f| %>
  <%= f.inputs do %>
    <%= f.input :title %>
    <%= f.input :parent_type,
                collection: options_for_select(
                  @slickr_navigation.decorate.parent_type_options
                ) %>
    <%= f.input :slickr_page_id, as: :select,
                collection: Hash[Slickr::Page.select(:id, :title)
                                             .map{|p| [p.title,p.id]}] %>
  <% end %>
  <%= f.actions %>
<% end %>
